{% extends "base.html" %}
{% block content %}

<!-- Hero -->
<section class="relative overflow-hidden">
  <div class="max-w-7xl mx-auto px-6 pt-20 pb-24 text-center">
    <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight leading-tight">
      Real-time Exercise Detection
    </h1>
    <p class="mt-6 text-zinc-300 max-w-2xl mx-auto">
      Detect exercises in real-time from your webcam, upload a video, or analyze a static image with bounding boxes and labels.
    </p>

    <a href="#detection"
       class="inline-block mt-10 rounded-full px-6 py-3 bg-white text-zinc-900 font-semibold shadow-lg shadow-white/10 hover:shadow-white/20 transition hover:-translate-y-0.5">
      Start Detection
    </a>
  </div>

  <div class="h-[1px] w-full bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
</section>

<!-- Supported Exercises -->
<section id="supported" class="max-w-7xl mx-auto px-6 py-16">
  <h2 class="text-3xl font-extrabold mb-10">Supported Exercises</h2>

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8">
    <article class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 overflow-hidden hover:border-white/10 transition">
      <img src="{{ url_for('static', filename='img/squat.png') }}" alt="Squat" class="w-full h-48 object-cover">
      <div class="p-6">
        <h3 class="text-xl font-bold">Squats</h3>
        <p class="mt-2 text-zinc-300 text-sm">Detects barbell back/front squats.</p>
      </div>
    </article>

    <article class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 overflow-hidden hover:border-white/10 transition">
      <img src="{{ url_for('static', filename='img/bench.png') }}" alt="Bench Press" class="w-full h-48 object-cover">
      <div class="p-6">
        <h3 class="text-xl font-bold">Bench Press</h3>
        <p class="mt-2 text-zinc-300 text-sm">Detects flat bench press.</p>
      </div>
    </article>

    <article class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 overflow-hidden hover:border-white/10 transition">
      <img src="{{ url_for('static', filename='img/deadlift.png') }}" alt="Deadlift" class="w-full h-48 object-cover">
      <div class="p-6">
        <h3 class="text-xl font-bold">Deadlifts</h3>
        <p class="mt-2 text-zinc-300 text-sm">Detects conventional deadlifts.</p>
      </div>
    </article>

    <article class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 overflow-hidden hover:border-white/10 transition">
      <img src="{{ url_for('static', filename='img/leg_extension.png') }}" alt="Leg Extension" class="w-full h-48 object-cover">
      <div class="p-6">
        <h3 class="text-xl font-bold">Leg Extension</h3>
        <p class="mt-2 text-zinc-300 text-sm">Detects machine-based leg extensions.</p>
      </div>
    </article>

    <article class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 overflow-hidden hover:border-white/10 transition">
      <img src="{{ url_for('static', filename='img/shoulder_press.png') }}" alt="Shoulder Press" class="w-full h-48 object-cover">
      <div class="p-6">
        <h3 class="text-xl font-bold">Shoulder Press</h3>
        <p class="mt-2 text-zinc-300 text-sm">Detects seated shoulder press.</p>
      </div>
    </article>
    
    <article class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 overflow-hidden hover:border-white/10 transition">
      <img src="{{ url_for('static', filename='img/pushup.png') }}" alt="Push-up" class="w-full h-48 object-cover">
      <div class="p-6">
        <h3 class="text-xl font-bold">Push-up</h3>
        <p class="mt-2 text-zinc-300 text-sm">Detects standard push-ups and knee variations.</p>
      </div>
    </article>
  </div>
</section>

<!-- Detection Section -->
<section id="detection" class="max-w-7xl mx-auto px-6 pb-24">
  <!-- Mode Selector -->
  <div class="reveal opacity-0 translate-y-4 mb-8">
    <div class="flex justify-center gap-4">
      <button id="mode-webcam" class="mode-btn active px-6 py-3 rounded-xl bg-white text-zinc-900 font-semibold transition hover:-translate-y-0.5">
        Webcam
      </button>
      <button id="mode-video" class="mode-btn px-6 py-3 rounded-xl bg-zinc-800 text-white font-semibold transition hover:-translate-y-0.5">
        Video Upload
      </button>
      <button id="mode-image" class="mode-btn px-6 py-3 rounded-xl bg-zinc-800 text-white font-semibold transition hover:-translate-y-0.5">
        Image Upload
      </button>
    </div>
  </div>

  <!-- Webcam Mode -->
  <div id="webcam-section" class="detection-section">
    <div class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 p-6">
      <h3 class="text-2xl font-bold mb-4">Live Webcam Detection</h3>
      <div class="flex justify-center mb-4">
        <button id="start-webcam" class="px-6 py-3 rounded-xl bg-green-600 text-white font-semibold transition hover:bg-green-700">
          Start Webcam
        </button>
        <button id="stop-webcam" class="hidden ml-4 px-6 py-3 rounded-xl bg-red-600 text-white font-semibold transition hover:bg-red-700">
          Stop Webcam
        </button>
      </div>
      <div class="flex justify-center">
        <img id="webcam-stream" class="hidden rounded-lg border border-white/10 max-w-full" alt="Webcam feed">
      </div>
      <div id="webcam-status" class="mt-4 text-sm text-zinc-400 text-center"></div>
    </div>
  </div>

  <!-- Video Upload Mode -->
  <div id="video-section" class="detection-section hidden">
    <div class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 p-6">
      <h3 class="text-2xl font-bold mb-4">Video Detection</h3>
      <form id="video-form">
        <label class="block">
          <span class="text-sm text-zinc-300">Choose video file (MP4, AVI, MOV, MKV, WEBM)</span>
          <input id="video-input" type="file" accept=".mp4,.avi,.mov,.mkv,.webm"
                 class="mt-2 w-full rounded-lg bg-zinc-800 border border-white/10 p-3 file:mr-4 file:rounded file:border-0 file:bg-white file:text-zinc-900 file:px-4 file:py-2 hover:cursor-pointer" required>
        </label>
        <button type="submit" class="mt-4 w-full rounded-xl bg-white text-zinc-900 font-semibold py-3 hover:-translate-y-0.5 transition">
          Process Video
        </button>
        <p id="video-status" class="mt-2 text-sm text-zinc-400"></p>
      </form>
      <div class="flex justify-center mt-6">
        <img id="video-stream" class="hidden rounded-lg border border-white/10 max-w-full" alt="Video feed">
      </div>
    </div>
  </div>

  <!-- Image Upload Mode -->
  <div id="image-section" class="detection-section hidden">
    <div class="grid lg:grid-cols-2 gap-10 items-start">
      <!-- Upload panel -->
      <div class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 p-6">
        <h3 class="text-2xl font-bold">Upload an Image</h3>
        <p class="text-zinc-300 text-sm mt-1">JPG/PNG up to ~10MB.</p>

        <form id="image-form">
          <label class="block">
            <span class="text-sm text-zinc-300">Choose file</span>
            <input id="image-input" type="file" accept=".jpg,.jpeg,.png,.webp"
                   class="mt-2 w-full rounded-lg bg-zinc-800 border border-white/10 p-3 file:mr-4 file:rounded file:border-0 file:bg-white file:text-zinc-900 file:px-4 file:py-2 hover:cursor-pointer" required>
          </label>

          <div id="preview" class="hidden mt-4">
            <img id="preview-img" class="rounded-lg border border-white/10 max-h-64 object-contain mx-auto" alt="Preview">
          </div>

          <button type="submit"
                  class="mt-4 w-full rounded-xl bg-white text-zinc-900 font-semibold py-3 hover:-translate-y-0.5 transition shadow-lg shadow-white/10 hover:shadow-white/20">
            Analyze
          </button>
          <p id="image-status" class="mt-2 text-sm text-zinc-400"></p>
        </form>
      </div>

      <!-- Results panel -->
      <div class="reveal opacity-0 translate-y-4 bg-zinc-900/50 rounded-2xl border border-white/5 p-6">
        <h3 class="text-2xl font-bold">Detection Results</h3>
        <div id="image-result" class="mt-4 space-y-4">
          <div class="text-zinc-400 text-sm">Upload an image to see detections.</div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
